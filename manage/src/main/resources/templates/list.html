<!DOCTYPE html>
<html>
<head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1">
    <title>学生管理系统</title>
    <link rel="stylesheet" href="/static/layui/css/layui.css">
    <style>
        body, html {
            min-height: 100%;
        }
    </style>
</head>
<style>
    .layui-input-inline {
        vertical-align: middle;
        color: black;
        line-height: 36px;
    }
</style>
<body style="padding: 20px;">

<div class="layui-card">
    <div class="layui-card-header">教师资料</div>
    <div class="layui-card-body layui-text">


        <div class="layui-form-item">
            <div class="layui-inline">
                <label class="layui-form-label">图片</label>
                <div class="layui-input-inline">
                    #if(me.annex!=null)
                   <img src="/file/#(me.annex)" style="width: 100px;height: 100px;"/>
                    #end
                </div>
            </div>
        </div>
        <div class="layui-form-item">
            <div class="layui-inline">
                <label class="layui-form-label">姓名</label>
                <div class="layui-input-inline">
                    #(me.fullName??)
                </div>
            </div>

            <div class="layui-inline">
                <label class="layui-form-label">工号</label>
                <div class="layui-input-inline">
                    #(me.jobNumber??)
                </div>
            </div>
        </div>

        <div class="layui-form-item">
            <div class="layui-inline">
                <label class="layui-form-label">出生年月</label>
                <div class="layui-input-inline">
                    #date(me.birthday??,"yyyy-MM-dd")
                </div>
            </div>

            <div class="layui-inline">
                <label class="layui-form-label">性别</label>
                <div class="layui-input-inline">
                    #(me.getSex().name??)
                </div>
            </div>
        </div>

        <div class="layui-form-item">
            <div class="layui-inline">
                <label class="layui-form-label">聘用性质</label>
                <div class="layui-input-inline">
                    #(me.getPyxz().name??)
                </div>
            </div>

            <div class="layui-inline">
                <label class="layui-form-label">职务</label>
                <div class="layui-input-inline">
                    #(me.job??)
                </div>
            </div>
            <div class="layui-inline">
                <label class="layui-form-label">职称</label>
                <div class="layui-input-inline">
                    #(me.getZc().name??)
                </div>
            </div>
        </div>


        <div class="layui-form-item">
            <div class="layui-inline">
                <label class="layui-form-label">学历</label>
                <div class="layui-input-inline">
                    #(me.getEducation().name??)
                </div>
            </div>

            <div class="layui-inline">
                <label class="layui-form-label">学位</label>
                <div class="layui-input-inline">
                    #(me.getDegree().name??)
                </div>
            </div>
        </div>


        <div class="layui-form-item">
            <div class="layui-inline">
                <label class="layui-form-label">专业领域</label>
                <div class="layui-input-inline">
                    #(me.getZyly().name??)
                </div>
            </div>

            <div class="layui-inline">
                <label class="layui-form-label">系部</label>
                <div class="layui-input-inline">
                    #(me.getDepartment().name??)
                </div>
            </div>
        </div>


        <div class="layui-form-item">
            <div class="layui-inline">
                <label class="layui-form-label">科室</label>
                <div class="layui-input-inline">
                    #(me.getDepartments().name??)
                </div>
            </div>

            <div class="layui-inline">
                <label class="layui-form-label">专业特长</label>
                <div class="layui-input-inline">
                    #(me.zytc!=''?me.zytc:'暂未填写')
                </div>
            </div>
        </div>

        <div class="layui-form-item">
            <div class="layui-inline">
                <label class="layui-form-label">高校资格证</label>
                <div class="layui-input-inline">
                   #(me.isGxzg()==true?'有':'无')
                </div>
            </div>

            <div class="layui-inline">
                <label class="layui-form-label">骨干教师</label>
                <div class="layui-input-inline">
                    #(me.isGgjs()==true?'有':'无')
                </div>
            </div>

            <div class="layui-inline">
                <label class="layui-form-label">双师教师</label>
                <div class="layui-input-inline">
                    #(me.isSsjs()==true?'有':'无')
                </div>
            </div>
        </div>

        <div class="layui-form-item">
            <div class="layui-inline">
                <label class="layui-form-label">QQ</label>
                <div class="layui-input-inline">
                    #(me.qq??)
                </div>
            </div>
            <div class="layui-inline">
                <label class="layui-form-label">邮箱</label>
                <div class="layui-input-inline">
                    #(me.email??)
                </div>
            </div>
            <div class="layui-inline">
                <label class="layui-form-label">手机号</label>
                <div class="layui-input-inline">
                    #(me.mobile??)
                </div>
            </div>
            <div class="layui-inline">
                <label class="layui-form-label">备注</label>
                <div class="layui-input-inline">
                    #(me.fullName??)
                </div>
            </div>

        </div>
    </div>
</div>
<div class="layui-card">
    <div class="layui-card-header">论文</div>
    <div class="layui-card-body layui-text">
        <table class="layui-hide" id="paper" lay-filter="demo"></table>
    </div>
</div>

<div class="layui-card">
    <div class="layui-card-header">获奖荣誉</div>
    <div class="layui-card-body layui-text">
        <table class="layui-hide" id="awards" lay-filter="demo"></table>
    </div>
</div>

<div class="layui-card">
    <div class="layui-card-header">进修学习</div>
    <div class="layui-card-body layui-text">
        <table class="layui-hide" id="furtherStudy" lay-filter="demo"></table>
    </div>
</div>

<div class="layui-card">
    <div class="layui-card-header">职业资格证书</div>
    <div class="layui-card-body layui-text">
        <table class="layui-hide" id="jobCertificate" lay-filter="demo"></table>
    </div>
</div>

<div class="layui-card">
    <div class="layui-card-header">挂职锻炼</div>
    <div class="layui-card-body layui-text">
        <table class="layui-hide" id="postWorkout" lay-filter="demo"></table>
    </div>
</div>

<div class="layui-card">
    <div class="layui-card-header">出版书籍</div>
    <div class="layui-card-body layui-text">
        <table class="layui-hide" id="publishingBooks" lay-filter="demo"></table>
    </div>
</div>

<div class="layui-card">
    <div class="layui-card-header">科研课题</div>
    <div class="layui-card-body layui-text">
        <table class="layui-hide" id="researchSubject" lay-filter="demo"></table>
    </div>
</div>

<div class="layui-card">
    <div class="layui-card-header">社会兼职</div>
    <div class="layui-card-body layui-text">
        <table class="layui-hide" id="socialWork" lay-filter="demo"></table>
    </div>
</div>

<div class="layui-card">
    <div class="layui-card-header">专业技术服务</div>
    <div class="layui-card-body layui-text">
        <table class="layui-hide" id="technicalPosts" lay-filter="demo"></table>
    </div>
</div>

<div class="layui-card">
    <div class="layui-card-header">技术专利</div>
    <div class="layui-card-body layui-text">
        <table class="layui-hide" id="technologyPatent" lay-filter="demo"></table>
    </div>
</div>
<div class="layui-card">
    <div class="layui-card-header">培训学习</div>
    <div class="layui-card-body layui-text">
        <table class="layui-hide" id="training" lay-filter="demo"></table>
    </div>
</div>


<script src="/static/layui/layui.js"></script>
<script src="https://cdn.bootcss.com/jquery/3.3.1/jquery.min.js"></script>
<script src="/static/js/Jquery-ajax.js"></script>
<script>

</script>
<script>
    layui.use(['table', 'form', 'jquery'], function () {
        var table = layui.table, form = layui.form, $ = layui.jquery;
        var where = {teacher:#(id)
    }
        var filterIndex = null;

        table.render({
            elem: '#teacher',
            url: '/teacher/list',
            where: where,
            limit: 999,
            cellMinWidth: 80,
            cols: [[
                {field: 'jobNumber', title: '工号'},
                {field: 'fullName', title: '姓名'},
                {field: 'birthday', title: '出生年月'},
                {
                    title: '性别', templet: function (s) {
                        return " <span class=\"layui-badge layui-bg-green\">" + s.sex.name + "</span>";
                    }
                },
                {
                    title: '聘用性质', templet: function (s) {
                        return " <span class=\"layui-badge layui-bg-green\">" + s.pyxz.name + "</span>";
                    }
                },
                {field: 'job', title: '职务'},
                {
                    title: '学历', templet: function (s) {
                        return " <span class=\"layui-badge layui-bg-green\">" + s.education.name + "</span>";
                    }
                },
                {
                    title: '学位', templet: function (s) {
                        return " <span class=\"layui-badge layui-bg-green\">" + s.degree.name + "</span>";
                    }
                },
                {
                    title: '专业领域', templet: function (s) {
                        return " <span class=\"layui-badge layui-bg-green\">" + s.zyly.name + "</span>";
                    }
                },
                {
                    title: '系部', templet: function (s) {
                        return " <span class=\"layui-badge layui-bg-green\">" + s.department.name + "</span>";
                    }
                },
                {
                    title: '科室', templet: function (s) {
                        return " <span class=\"layui-badge layui-bg-green\">" + s.departments.name + "</span>";
                    }
                },
            ]]
        });

        table.render({
            elem: '#paper',
            url: '/paper/list',
            where: where,
            limit: 999,
            cellMinWidth: 80,
            cols: [[
                {field: 'name', title: '名称'},
                {field: 'journalOfPublications', title: '刊物学报'},
                {field: 'issueNumber', title: '刊号'},
                {
                    title: '刊物类别', templet: function (s) {
                        return " <span class=\"layui-badge layui-bg-green\">" + s.publicationCategory.name + "</span>";
                    }
                },
                {
                    title: '本人排名', templet: function (s) {
                        return " <span class=\"layui-badge layui-bg-green\">" + s.myRanking.name + "</span>";
                    }
                },
                {field: 'publicationDate', title: '出版日期'},
                {
                    title: '教师', templet: function (s) {
                        return " <span class=\"layui-badge layui-bg-green\">" + s.teacher.fullName + "</span>";
                    }
                },
            ]]
        });
        table.render({
            elem: '#awards',
            url: '/awards/list',
            where: where,
            limit: 999,
            cols: [[
                {field: 'awardedName', title: '获奖名称'},
                {field: 'getDate', title: '获取日期'},
                {
                    title: '获奖级别', templet: function (s) {
                        return " <span class=\"layui-badge layui-bg-green\">" + s.awardLevel.name + "</span>";
                    }
                },
                {field: 'awardingUnit', title: '颁奖单位'},
                {
                    title: '本人排名', templet: function (s) {
                        return " <span class=\"layui-badge layui-bg-green\">" + s.myRanking.name + "</span>";
                    }
                },
                {field: 'awardAmount', title: '获奖金额'},
                {
                    title: '教师', templet: function (s) {
                        return " <span class=\"layui-badge layui-bg-green\">" + s.teacher.fullName + "</span>";
                    }
                },
            ]]
        });
        table.render({
            elem: '#furtherStudy',
            url: '/furtherStudy/list',
            where: where,
            limit: 999,
            cols: [[
                {field: 'trainingTime', title: '进修时间'},
                {field: 'completeTime', title: '完成时间'},
                {field: 'studySchool', title: '进修学校'},
                {field: 'professionalTitle', title: '专业名称'},
                {field: 'furtherEducation', title: '进修学历'},
                {field: 'advancedDegree', title: '进修学位'},
                {
                    title: '教师', templet: function (s) {
                        return " <span class=\"layui-badge layui-bg-green\">" + s.teacher.fullName + "</span>";
                    }
                },
            ]]
        });
        table.render({
            elem: '#jobCertificate',
            url: '/jobCertificate/list',
            where: where,
            limit: 999,
            cols: [[
                {field: 'level', title: '等级'},
                {field: 'name', title: '名称'},
                {field: 'fzdw', title: '发证单位'},
                {field: 'getDate', title: '获取日期'},
                {
                    title: '教师', templet: function (s) {
                        return " <span class=\"layui-badge layui-bg-green\">" + s.teacher.fullName + "</span>";
                    }
                },
            ]]
        });
        table.render({
            elem: '#postWorkout',
            url: '/postWorkout/list',
            where: where,
            limit: 999,
            cols: [[
                {field: 'companyName', title: '单位名称'},
                {field: 'job', title: '岗位'},
                {field: 'startingTime', title: '开始时间'},
                {field: 'endTime', title: '结束时间'},
                {
                    title: '派出部门', templet: function (s) {
                        return " <span class=\"layui-badge layui-bg-green\">" + s.dispatchDepartment.name + "</span>";
                    }
                },
                {
                    title: '教师', templet: function (s) {
                        return " <span class=\"layui-badge layui-bg-green\">" + s.teacher.fullName + "</span>";
                    }
                },
            ]]
        });
        table.render({
            elem: '#publishingBooks',
            url: '/publishingBooks/list',
            where: where,
            limit: 999,
            cols: [[
                {field: 'name', title: '书籍名称'},
                {field: 'press', title: '出版社'},
                {field: 'isbn', title: 'ISBN'},
                {
                    title: '本人排名', templet: function (s) {
                        return " <span class=\"layui-badge layui-bg-green\">" + s.myRanking.name + "</span>";
                        ;
                    }
                },
                {field: 'publicationDate', title: '出版日期'},
                {
                    title: '教师', templet: function (s) {
                        return " <span class=\"layui-badge layui-bg-green\">" + s.teacher.fullName + "</span>";
                    }
                },
            ]]
        });
        table.render({
            elem: '#researchSubject',
            url: '/researchSubject/list',
            where: where,
            limit: 999,
            cols: [[
                {
                    title: '课题性质', templet: function (s) {
                        return " <span class=\"layui-badge layui-bg-green\">" + s.natureOfTheProject.name + "</span>";
                    }
                },
                {field: 'name', title: '名称'},
                {field: 'dateOfEstablishment', title: '立项日期'},
                {field: 'projectSource', title: '项目来源'},
                {field: 'projectNumber', title: '立项编号'},
                {field: 'theAmountOfMoney', title: '到款金额'},
                {
                    title: '本人排名', templet: function (s) {
                        return " <span class=\"layui-badge layui-bg-green\">" + s.myRanking.name + "</span>";
                    }
                },
                {
                    title: '教师', templet: function (t) {
                        return " <span class=\"layui-badge layui-bg-green\">" + t.teacher.fullName + "</span>";
                    }
                },
            ]]
        });
        table.render({
            elem: '#socialWork',
            url: '/socialWork/list',
            where: where,
            limit: 999,
            cols: [[
                {field: 'companyName', title: '单位名称'},
                {field: 'job', title: '岗位'},
                {field: 'startingTime', title: '开始时间'},
                {field: 'endTime', title: '结束时间'},
                {
                    title: '教师', templet: function (t) {
                        return " <span class=\"layui-badge layui-bg-green\">" + t.teacher.fullName + "</span>";
                    }
                },
            ]]
        });
        table.render({
            elem: '#technicalPosts',
            url: '/technicalPosts/list',
            where: where,
            limit: 999,
            cols: [[
                {field: 'level', title: '等级'},
                {field: 'name', title: '名称'},
                {field: 'fzdw', title: '发证单位'},
                {field: 'getDate', title: '获取日期'},
                {
                    title: '教师', templet: function (t) {
                        return " <span class=\"layui-badge layui-bg-green\">" + t.teacher.fullName + "</span>";
                    }
                },
            ]]
        });

        table.render({
            elem: '#technologyPatent',
            url: '/technologyPatent/list',
            where: where,
            limit: 999,
            cols: [[
                {field: 'name', title: '名称'},
                {
                    title: '专利类型', templet: function (p) {
                        return " <span class=\"layui-badge layui-bg-green\">" + p.patentType.name + "</span>";
                    }
                },
                {field: 'number', title: '专利编号'},
                {field: 'getDate', title: '获取日期'},
                {
                    title: '本人排名', templet: function (m) {
                        return " <span class=\"layui-badge layui-bg-green\">" + m.myRanking.name + "</span>"
                    }
                },
                {
                    title: '教师', templet: function (t) {
                        return " <span class=\"layui-badge layui-bg-green\">" + t.teacher.fullName + "</span>"
                    }
                },
            ]]
        });

        table.render({
            elem: '#training',
            url: '/training/list',
            where: where,
            limit: 999,
            cols: [[
                {field: 'trainingPeriod', title: '培训时间'},
                {field: 'completeTime', title: '完成时间'},
                {field: 'trainingName', title: '培训名称'},
                {field: 'getACertificate', title: '获取证书'},
                {
                    title: '教师', templet: function (s) {
                        return " <span class=\"layui-badge layui-bg-green\">" + s.teacher.fullName + "</span>";
                    }
                },
            ]]
        });


        //监听提交
        form.on('submit(demo1)', function (data) {
            where = data.field;
            table.reload('test', {
                url: '/awards/list',
                where: where,
            });
            layer.close(filterIndex)
            return false;
        });

        table.on('tool(demo)', function (obj) {
            var id = obj.tr[0].parentNode.parentNode.parentNode.parentNode.parentNode.parentNode.parentElement.getElementsByTagName("table")[0].id;
            var data = obj.data;
            if (obj.event === 'detail') {
                layer.msg('ID：' + data.id + ' 的查看操作');
            } else if (obj.event === 'del') {
                tools.delete([{id: obj.data.id}])
            } else if (obj.event === 'edit') {
                tools.form(id, obj.data.id)
            }
        });

        var $ = layui.$, active = {
            deleteAll: function () { //获取选中数据
                var checkStatus = table.checkStatus('test')
                    , data = checkStatus.data;
                console.log(data)
                tools.delete(data.map(function (value) {
                    return {id: value.id}
                }))
            },
            add: function () {
                tools.form(0)
            },
            filter: function () {
                filterIndex = layer.open({
                    type: 1,
                    area: ['820px', '540px'], //宽高
                    content: $('#filter').html(),
                    success: function () {
                        form.render()
                    }
                });
            }
        };
        var tools = {
            delete: function (name, obj) {
                layer.confirm('真的删除行么', function (index) {
                    $.ajax({
                        url: '/' + name + '/delete',
                        type: 'POST',
                        contentType: "application/json",
                        data: JSON.stringify(obj),
                        datType: "JSON",
                        success: function (res) {
                            layer.close(index);
                            window.location.reload();
                        },
                        error: function (j) {
                            var obj = JSON.parse(j.responseText)
                            layer.msg(obj.message)
                        }
                    })

                });
            },
            form: function (name, id) {
                var index = layer.open({
                    type: 2,
                    area: ['400px', '800px'],
                    maxmin: true,
                    content: '/' + name + '/form/' + id //这里content是一个URL，如果你不想让iframe出现滚动条，你还可以content: ['http://sentsin.com', 'no']
                });
                layer.full(index);
            }
        }
        $('.demoTable .layui-btn').on('click', function () {
            var type = $(this).data('type');
            active[type] ? active[type].call(this) : '';
        });
    })
</script>
</body>
</html>